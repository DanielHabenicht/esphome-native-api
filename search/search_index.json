{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Rust Crate for the esphome Native API","text":"<p>Implementation of the esphome native API for Rust. While reverse engineering the \"missing\" documentation of the API was reconstructed: https://ubihome.github.io/esphome-native-api/native_api/</p> <p>Docs: https://ubihome.github.io/esphome-native-api/</p> <p>Crate: https://crates.io/crates/esphome-native-api</p>"},{"location":"native_api/","title":"Missing Native API Documentation","text":"<ul> <li>TCP Based</li> <li>Protocol Buffers</li> </ul>"},{"location":"native_api/#entities","title":"Entities","text":"<ul> <li>Sensor Mappings   https://github.com/esphome/aioesphomeapi/blob/e14b6ec9315695ba13e7cf6b750bc892b77a0a2e/aioesphomeapi/model.py#L433</li> </ul>"},{"location":"native_api/bluetooth_proxy/","title":"Bluetooth proxy","text":"<p>HelloResponse: api_version_major: 1 api_version_minor: 10</p> <p>DeviceInfoResponse: name: \"bluetooth-proxy\" mac_address: \"E4:65:B8:A3:90:00\" esphome_version: \"2025.4.1\" compilation_time: \"May  2 2025, 03:08:50\" model: \"esp32dev\" legacy_bluetooth_proxy_version: 5 manufacturer: \"Espressif\" friendly_name: \"bluetooth-proxy\" bluetooth_proxy_feature_flags: 63 bluetooth_mac_address: \"E4:65:B8:A3:90:02\"</p> <p>https://github.com/esphome/aioesphomeapi/blob/71bcda2c2cf9aecf3843c01937a24e012f7a3244/aioesphomeapi/model.py#L110 =&gt;  class BluetoothProxyFeature(enum.IntFlag):     PASSIVE_SCAN = 1 &lt;&lt; 0             # 1     ACTIVE_CONNECTIONS = 1 &lt;&lt; 1       # 2     REMOTE_CACHING = 1 &lt;&lt; 2           # 4     PAIRING = 1 &lt;&lt; 3                  # 8     CACHE_CLEARING = 1 &lt;&lt; 4           # 16     RAW_ADVERTISEMENTS = 1 &lt;&lt; 5       # 32     FEATURE_STATE_AND_MODE = 1 &lt;&lt; 6   # 64</p> <pre><code>0000000000111111\n</code></pre>"},{"location":"native_api/encryption/","title":"Encryption","text":"<ul> <li>for api encryption the mdns entry needs to be added: <code>\"api_encryption=Noise_NNpsk0_25519_ChaChaPoly_SHA256\"</code></li> </ul>"},{"location":"native_api/general/","title":"General","text":""},{"location":"native_api/general/#packet-format","title":"Packet Format  <sup>1</sup>","text":"Part Description Example 0 Preamble (always zero byte) <code>0x00</code> 1 Message Length <code>0x00</code> 2 Message Type (Internal number for identifying the proto message =&gt; Link to custom mapping) 0x01 3-X Content <pre><code>---\ntitle: \"Native API Packet\"\n---\npacket-beta\n  0-0: \"Marker\"\n  1-1: \"Length\"\n  2-2: \"Type\"\n  3-31: \"Protobuf Content\"</code></pre>"},{"location":"native_api/general/#example-communication","title":"Example Communication","text":"<pre><code>sequenceDiagram\n    Client-&gt;&gt;Api: HelloRequest\n    Api-&gt;&gt;Client: HelloResponse\n    Client-&gt;&gt;Api: DisconnectRequest\n\n\n    Client-&gt;&gt;Api: ConnectRequest\n    Api-&gt;&gt;Client: ConnectResponse\n    Client-&gt;&gt;Api: DeviceInfoRequest\n    Api-&gt;&gt;Client: DeviceInfoResponse\n    Client-&gt;&gt;+Api: ListEntitiesRequest\n    Api-&gt;&gt;Client: ListEntitiesSensorResponse\n    Api-&gt;&gt;Client: ListEntitiesBinarySensorResponse\n    Api-&gt;&gt;-Client: ListEntitiesDoneResponse\n\n    loop Keep Alive Messaging\n        Client-&gt;&gt;Api: PingRequest\n        Api-&gt;&gt;Client: PingResponse\n    end\n\n    Client-&gt;&gt;Api: DisconnectRequest\n    Api-&gt;&gt;Client: DisconnectResponse\n</code></pre> <ol> <li> <p>From: https://github.com/esphome/aioesphomeapi/blob/main/aioesphomeapi/connection.py#L700 https://github.com/esphome/aioesphomeapi/blob/main/aioesphomeapi/_frame_helper/plain_text.py#L41 \u21a9</p> </li> </ol>"}]}